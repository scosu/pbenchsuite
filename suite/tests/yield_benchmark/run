#!/usr/bin/python3
import time
import os
import subprocess
import sys

f = open('/proc/cpuinfo', 'r')
procs = f.read()
f.close()
num_procs = 0
for i in procs.splitlines():
	if i.startswith('processor'):
		num_procs += 1
num_procs *= 2

cmd = ['./yield']
if len(sys.argv) > 1:
	cmd += sys.argv[1:]
else:
	cmd.append('1000000000')
	cmd.append(str(num_procs))
start = time.time()
p = subprocess.Popen(cmd)
p.wait()
end = time.time()
print(end - start)

